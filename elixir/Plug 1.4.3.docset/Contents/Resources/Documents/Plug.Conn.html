    <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.17.1">
    <title>Plug.Conn – Plug v1.4.3</title>
    <link rel="stylesheet" href="dist/app-110d9134a6.css" />
    
    
    <script src="dist/sidebar_items-dbdf267600.js"></script>
    
  </head>
  <body data-type="modules">
    <script>try { if(localStorage.getItem('night-mode')) document.body.className += ' night-mode'; } catch (e) { }</script>

    <div class="main">
<button class="sidebar-toggle" style="visibility: hidden">
  <span class="icon-menu" aria-hidden="true"></span>
  <span class="sr-only">Toggle Sidebar</span>
</button>
<section class="sidebar" style="visibility: hidden">

  
  <a href="readme.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        Plug
      </h1>
      <h2 class="sidebar-projectVersion">
        v1.4.3
      </h2>
    </div>
    
  </a>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    <input name="q" type="text" id="search-list" class="search-input" placeholder="search" aria-label="Search" autocomplete="off" />
  </form>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    
      <li><a id="exceptions-list" href="#full-list">Exceptions</a></li>
    

    
  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content" style="padding-left: 0;">
  <div class="content-outer">
    <div id="content" class="content-inner" style="margin: 0; margin-top: -28px; padding: 0px 14px;">


      <h1>
        <small class="visible-xs">Plug v1.4.3</small>
        Plug.Conn
        
          <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L3" title="View Source" class="view-source" rel="help">
            <span class="icon-code" aria-hidden="true"></span>
            <span class="sr-only">View Source</span>
          </a>
        
      </h1>

      
        <section id="moduledoc">
          <p>The Plug connection.</p>
<p>This module defines a <a href="Plug.Conn.html#content"><code class="inline">Plug.Conn</code></a> struct and the main functions
for working with Plug connections.</p>
<p>Note request headers are normalized to lowercase and response
headers are expected to have lower-case keys.</p>
<h2 id="module-request-fields" class="section-heading">
  <a href="#module-request-fields" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Request fields
</h2>

<p>These fields contain request information:</p>
<ul>
<li><code class="inline">host</code> - the requested host as a binary, example: <code class="inline">&quot;www.example.com&quot;</code>
</li>
<li><code class="inline">method</code> - the request method as a binary, example: <code class="inline">&quot;GET&quot;</code>
</li>
<li><code class="inline">path_info</code> - the path split into segments, example: <code class="inline">[&quot;hello&quot;, &quot;world&quot;]</code>
</li>
<li><code class="inline">script_name</code> - the initial portion of the URL’s path that corresponds to the application
routing, as segments, example: [“sub”,”app”].
</li>
<li><code class="inline">request_path</code> - the requested path, example: <code class="inline">/trailing/and//double//slashes/</code>
</li>
<li><code class="inline">port</code> - the requested port as an integer, example: <code class="inline">80</code>
</li>
<li><code class="inline">peer</code> - the actual TCP peer that connected, example: <code class="inline">{{127, 0, 0, 1}, 12345}</code>. Often this
is not the actual IP and port of the client, but rather of a load-balancer or request-router.
</li>
<li><code class="inline">remote_ip</code> - the IP of the client, example: <code class="inline">{151, 236, 219, 228}</code>. This field is meant to
be overwritten by plugs that understand e.g. the <code class="inline">X-Forwarded-For</code> header or HAProxy’s PROXY
protocol. It defaults to peer’s IP.
</li>
<li><code class="inline">req_headers</code> - the request headers as a list, example: <code class="inline">[{&quot;content-type&quot;, &quot;text/plain&quot;}]</code>.
Note all headers will be downcased.
</li>
<li><code class="inline">scheme</code> - the request scheme as an atom, example: <code class="inline">:http</code>
</li>
<li><code class="inline">query_string</code> - the request query string as a binary, example: <code class="inline">&quot;foo=bar&quot;</code>
</li>
</ul>
<h2 id="module-fetchable-fields" class="section-heading">
  <a href="#module-fetchable-fields" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Fetchable fields
</h2>

<p>The request information in these fields is not populated until it is fetched
using the associated <code class="inline">fetch_</code> function. For example, the <code class="inline">cookies</code> field uses
<a href="#fetch_cookies/2"><code class="inline">fetch_cookies/2</code></a>.</p>
<p>If you access these fields before fetching them, they will be returned as
<a href="Plug.Conn.Unfetched.html"><code class="inline">Plug.Conn.Unfetched</code></a> structs.</p>
<ul>
<li><code class="inline">cookies</code>- the request cookies with the response cookies
</li>
<li><code class="inline">body_params</code> - the request body params, populated through a <a href="Plug.Parsers.html"><code class="inline">Plug.Parsers</code></a> parser.
</li>
<li><code class="inline">query_params</code> - the request query params, populated through <a href="#fetch_query_params/2"><code class="inline">fetch_query_params/2</code></a>
</li>
<li><code class="inline">path_params</code> - the request path params, populated by routers such as <a href="Plug.Router.html"><code class="inline">Plug.Router</code></a>
</li>
<li><code class="inline">params</code> - the request params, the result of merging the <code class="inline">:body_params</code> and <code class="inline">:query_params</code>
 with <code class="inline">:path_params</code>
</li>
<li><code class="inline">req_cookies</code> - the request cookies (without the response ones)
</li>
</ul>
<h2 id="module-response-fields" class="section-heading">
  <a href="#module-response-fields" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Response fields
</h2>

<p>These fields contain response information:</p>
<ul>
<li><code class="inline">resp_body</code> - the response body, by default is an empty string. It is set
to nil after the response is sent, except for test connections.
</li>
<li><code class="inline">resp_charset</code> - the response charset, defaults to “utf-8”
</li>
<li><code class="inline">resp_cookies</code> - the response cookies with their name and options
</li>
<li><code class="inline">resp_headers</code> - the response headers as a list of tuples, by default <code class="inline">cache-control</code>
is set to <code class="inline">&quot;max-age=0, private, must-revalidate&quot;</code>. Note, response headers
are expected to have lower-case keys.
</li>
<li><code class="inline">status</code> - the response status
</li>
</ul>
<p>Furthermore, the <code class="inline">before_send</code> field stores callbacks that are invoked
before the connection is sent. Callbacks are invoked in the reverse order
they are registered (callbacks registered first are invoked last) in order
to reproduce a pipeline ordering.</p>
<h2 id="module-connection-fields" class="section-heading">
  <a href="#module-connection-fields" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Connection fields
</h2>

<ul>
<li><code class="inline">assigns</code> - shared user data as a map
</li>
<li><code class="inline">owner</code> - the Elixir process that owns the connection
</li>
<li><code class="inline">halted</code> - the boolean status on whether the pipeline was halted
</li>
<li><code class="inline">secret_key_base</code> - a secret key used to verify and encrypt cookies.
the field must be set manually whenever one of those features are used.
This data must be kept in the connection and never used directly, always
use <a href="Plug.Crypto.KeyGenerator.html#generate/3"><code class="inline">Plug.Crypto.KeyGenerator.generate/3</code></a> to derive keys from it
</li>
<li><code class="inline">state</code> - the connection state
</li>
</ul>
<p>The connection state is used to track the connection lifecycle. It starts as
<code class="inline">:unset</code> but is changed to <code class="inline">:set</code> (via <a href="#resp/3"><code class="inline">resp/3</code></a>) or <code class="inline">:set_chunked</code>
(used only for <code class="inline">before_send</code> callbacks by <a href="#send_chunked/2"><code class="inline">send_chunked/2</code></a>) or <code class="inline">:file</code>
(when invoked via <a href="#send_file/3"><code class="inline">send_file/3</code></a>). Its final result is <code class="inline">:sent</code> or
<code class="inline">:chunked</code> depending on the response model.</p>
<h2 id="module-private-fields" class="section-heading">
  <a href="#module-private-fields" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Private fields
</h2>

<p>These fields are reserved for libraries/framework usage.</p>
<ul>
<li><code class="inline">adapter</code> - holds the adapter information in a tuple
</li>
<li><code class="inline">private</code> - shared library data as a map
</li>
</ul>
<h2 id="module-protocols" class="section-heading">
  <a href="#module-protocols" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Protocols
</h2>

<p><a href="Plug.Conn.html#content"><code class="inline">Plug.Conn</code></a> implements both the Collectable and Inspect protocols
out of the box. The inspect protocol provides a nice representation
of the connection while the collectable protocol allows developers
to easily chunk data. For example:</p>
<pre><code class="elixir"># Send the chunked response headers
conn = send_chunked(conn, 200)

# Pipe the given list into a connection
# Each item is emitted as a chunk
Enum.into(~w(each chunk as a word), conn)</code></pre>
<h2 id="module-custom-status-codes" class="section-heading">
  <a href="#module-custom-status-codes" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Custom status codes
</h2>

<p>Plug allows status codes to be overridden or added in order to allow new codes
not directly specified by Plug or its adapters. Adding or overriding a status
code is done through the Mix configuration of the <code class="inline">:plug</code> application. For
example, to override the existing 404 reason phrase for the 404 status code
(“Not Found” by default) and add a new 451 status code, the following config
can be specified:</p>
<pre><code class="elixir">config :plug, :statuses, %{
  404 =&gt; &quot;Actually This Was Found&quot;,
  451 =&gt; &quot;Unavailable For Legal Reasons&quot;
}</code></pre>
<p>As this configuration is Plug specific, Plug will need to be recompiled for
the changes to take place: this will not happen automatically as dependencies
are not automatically recompiled when their configuration changes. To recompile
Plug:</p>
<pre><code class="elixir">mix deps.clean --build plug</code></pre>
<p>The atoms that can be used in place of the status code in many functions are
inflected from the reason phrase of the status code. With the above
configuration, the following will all work:</p>
<pre><code class="elixir">put_status(conn, :not_found)                     # 404
put_status(conn, :actually_this_was_found)       # 404
put_status(conn, :unavailable_for_legal_reasons) # 451</code></pre>
<p>Even though 404 has been overridden, the <code class="inline">:not_found</code> atom can still be used
to set the status to 404 as well as the new atom <code class="inline">:actually_this_was_found</code>
inflected from the reason phrase “Actually This Was Found”.</p>

        </section>
      

      
        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>
          
  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#t:adapter/0">adapter()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:assigns/0">assigns()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:before_send/0">before_send()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:body/0">body()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:cookies/0">cookies()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:halted/0">halted()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:headers/0">headers()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:host/0">host()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:int_status/0">int_status()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:method/0">method()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:owner/0">owner()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:param/0">param()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:params/0">params()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:peer/0">peer()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:port_number/0">port_number()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:query_string/0">query_string()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:resp_cookies/0">resp_cookies()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:scheme/0">scheme()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:secret_key_base/0">secret_key_base()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:segments/0">segments()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:state/0">state()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:status/0">status()</a>
  </div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:t/0">t()</a>
  </div>
  
</div>

  </div>


          
  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#assign/3">assign(conn, key, value)</a>
  </div>
  
    <div class="summary-synopsis"><p>Assigns a value to a key in the connection</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#async_assign/3">async_assign(conn, key, fun)</a>
  </div>
  
    <div class="summary-synopsis"><p>Starts a task to assign a value to a key in the connection</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#await_assign/3">await_assign(conn, key, timeout \\ 5000)</a>
  </div>
  
    <div class="summary-synopsis"><p>Awaits the completion of an async assign</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#chunk/2">chunk(conn, chunk)</a>
  </div>
  
    <div class="summary-synopsis"><p>Sends a chunk as part of a chunked response</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#clear_session/1">clear_session(conn)</a>
  </div>
  
    <div class="summary-synopsis"><p>Clears the entire session</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#configure_session/2">configure_session(conn, opts)</a>
  </div>
  
    <div class="summary-synopsis"><p>Configures the session</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#delete_req_header/2">delete_req_header(conn, key)</a>
  </div>
  
    <div class="summary-synopsis"><p>Deletes a request header if present</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#delete_resp_cookie/3">delete_resp_cookie(conn, key, opts \\ [])</a>
  </div>
  
    <div class="summary-synopsis"><p>Deletes a response cookie</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#delete_resp_header/2">delete_resp_header(conn, key)</a>
  </div>
  
    <div class="summary-synopsis"><p>Deletes a response header if present</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#delete_session/2">delete_session(conn, key)</a>
  </div>
  
    <div class="summary-synopsis"><p>Deletes the session for the given <code class="inline">key</code></p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#fetch_cookies/2">fetch_cookies(conn, opts \\ [])</a>
  </div>
  
    <div class="summary-synopsis"><p>Fetches cookies from the request headers</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#fetch_query_params/2">fetch_query_params(conn, opts \\ [])</a>
  </div>
  
    <div class="summary-synopsis"><p>Fetches query parameters from the query string</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#fetch_session/2">fetch_session(conn, opts \\ [])</a>
  </div>
  
    <div class="summary-synopsis"><p>Fetches the session from the session store. Will also fetch cookies</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_req_header/2">get_req_header(conn, key)</a>
  </div>
  
    <div class="summary-synopsis"><p>Returns the values of the request header specified by <code class="inline">key</code></p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_resp_header/2">get_resp_header(conn, key)</a>
  </div>
  
    <div class="summary-synopsis"><p>Returns the values of the response header specified by <code class="inline">key</code></p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_session/2">get_session(conn, key)</a>
  </div>
  
    <div class="summary-synopsis"><p>Returns session value for the given <code class="inline">key</code>. If <code class="inline">key</code>
is not set, <code class="inline">nil</code> is returned</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#halt/1">halt(conn)</a>
  </div>
  
    <div class="summary-synopsis"><p>Halts the Plug pipeline by preventing further plugs downstream from being
invoked. See the docs for <a href="Plug.Builder.html"><code class="inline">Plug.Builder</code></a> for more information on halting a
plug pipeline</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#merge_resp_headers/2">merge_resp_headers(conn, headers)</a>
  </div>
  
    <div class="summary-synopsis"><p>Merges a series of response headers into the connection</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#put_private/3">put_private(conn, key, value)</a>
  </div>
  
    <div class="summary-synopsis"><p>Assigns a new <strong>private</strong> key and value in the connection</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#put_req_header/3">put_req_header(conn, key, value)</a>
  </div>
  
    <div class="summary-synopsis"><p>Adds a new request header (<code class="inline">key</code>) if not present, otherwise replaces the
previous value of that header with <code class="inline">value</code></p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#put_resp_content_type/3">put_resp_content_type(conn, content_type, charset \\ &quot;utf-8&quot;)</a>
  </div>
  
    <div class="summary-synopsis"><p>Sets the value of the <code class="inline">&quot;content-type&quot;</code> response header taking into account the
<code class="inline">charset</code></p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#put_resp_cookie/4">put_resp_cookie(conn, key, value, opts \\ [])</a>
  </div>
  
    <div class="summary-synopsis"><p>Puts a response cookie</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#put_resp_header/3">put_resp_header(conn, key, value)</a>
  </div>
  
    <div class="summary-synopsis"><p>Adds a new response header (<code class="inline">key</code>) if not present, otherwise replaces the
previous value of that header with <code class="inline">value</code></p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#put_session/3">put_session(conn, key, value)</a>
  </div>
  
    <div class="summary-synopsis"><p>Puts the specified <code class="inline">value</code> in the session for the given <code class="inline">key</code></p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#put_status/2">put_status(conn, status)</a>
  </div>
  
    <div class="summary-synopsis"><p>Stores the given status code in the connection</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#read_body/2">read_body(conn, opts \\ [])</a>
  </div>
  
    <div class="summary-synopsis"><p>Reads the request body</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#read_part_body/2">read_part_body(conn, opts)</a>
  </div>
  
    <div class="summary-synopsis"><p>Reads the body of a multipart request</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#read_part_headers/2">read_part_headers(conn, opts \\ [])</a>
  </div>
  
    <div class="summary-synopsis"><p>Reads the headers of a multipart request</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#register_before_send/2">register_before_send(conn, callback)</a>
  </div>
  
    <div class="summary-synopsis"><p>Registers a callback to be invoked before the response is sent</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#request_url/1">request_url(conn)</a>
  </div>
  
    <div class="summary-synopsis"><p>Returns the full request URL</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#resp/3">resp(conn, status, body)</a>
  </div>
  
    <div class="summary-synopsis"><p>Sets the response to the given <code class="inline">status</code> and <code class="inline">body</code></p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#send_chunked/2">send_chunked(conn, status)</a>
  </div>
  
    <div class="summary-synopsis"><p>Sends the response headers as a chunked response</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#send_file/5">send_file(conn, status, file, offset \\ 0, length \\ :all)</a>
  </div>
  
    <div class="summary-synopsis"><p>Sends a file as the response body with the given <code class="inline">status</code>
and optionally starting at the given offset until the given length</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#send_resp/1">send_resp(conn)</a>
  </div>
  
    <div class="summary-synopsis"><p>Sends a response to the client</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#send_resp/3">send_resp(conn, status, body)</a>
  </div>
  
    <div class="summary-synopsis"><p>Sends a response with the given status and body</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_req_header/4">update_req_header(conn, key, initial, fun)</a>
  </div>
  
    <div class="summary-synopsis"><p>Updates a request header if present, otherwise it sets it to an initial
value</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_resp_header/4">update_resp_header(conn, key, initial, fun)</a>
  </div>
  
    <div class="summary-synopsis"><p>Updates a response header if present, otherwise it sets it to an initial
value</p>
</div>
  
</div>

  </div>


          

        </section>
      

      
        <section id="types" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#types">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Types
          </h1>
          <div class="types-list">
            <div class="detail" id="t:adapter/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/adapter" class="dashAnchor"></a>
  <a href="#t:adapter/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">adapter()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L141" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>adapter() :: {module, term}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:assigns/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/assigns" class="dashAnchor"></a>
  <a href="#t:assigns/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">assigns()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L142" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>assigns() :: %{optional(atom) => any}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:before_send/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/before_send" class="dashAnchor"></a>
  <a href="#t:before_send/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">before_send()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L143" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>before_send() :: [(<a href="#t:t/0">t</a> -> <a href="#t:t/0">t</a>)]</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:body/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/body" class="dashAnchor"></a>
  <a href="#t:body/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">body()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L144" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>body() :: iodata</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:cookies/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/cookies" class="dashAnchor"></a>
  <a href="#t:cookies/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">cookies()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L145" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>cookies() :: %{optional(binary) => binary}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:halted/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/halted" class="dashAnchor"></a>
  <a href="#t:halted/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">halted()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L146" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>halted() :: boolean</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:headers/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/headers" class="dashAnchor"></a>
  <a href="#t:headers/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">headers()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L147" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>headers() :: [{binary, binary}]</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:host/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/host" class="dashAnchor"></a>
  <a href="#t:host/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">host()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L148" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>host() :: binary</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:int_status/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/int_status" class="dashAnchor"></a>
  <a href="#t:int_status/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">int_status()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L149" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>int_status() :: non_neg_integer | nil</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:method/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/method" class="dashAnchor"></a>
  <a href="#t:method/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">method()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L151" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>method() :: binary</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:owner/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/owner" class="dashAnchor"></a>
  <a href="#t:owner/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">owner()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L150" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>owner() :: pid</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:param/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/param" class="dashAnchor"></a>
  <a href="#t:param/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">param()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L152" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>param() :: binary | %{optional(binary) => <a href="#t:param/0">param</a>} | [<a href="#t:param/0">param</a>]</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:params/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/params" class="dashAnchor"></a>
  <a href="#t:params/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">params()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L153" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>params() :: %{optional(binary) => <a href="#t:param/0">param</a>}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:peer/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/peer" class="dashAnchor"></a>
  <a href="#t:peer/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">peer()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L154" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>peer() :: {:inet.ip_address, :inet.port_number}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:port_number/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/port_number" class="dashAnchor"></a>
  <a href="#t:port_number/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">port_number()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L155" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>port_number() :: :inet.port_number</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:query_string/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/query_string" class="dashAnchor"></a>
  <a href="#t:query_string/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">query_string()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L156" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>query_string() :: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:resp_cookies/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/resp_cookies" class="dashAnchor"></a>
  <a href="#t:resp_cookies/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">resp_cookies()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L157" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>resp_cookies() :: %{optional(binary) => %{}}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:scheme/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/scheme" class="dashAnchor"></a>
  <a href="#t:scheme/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">scheme()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L158" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>scheme() :: :http | :https</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:secret_key_base/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/secret_key_base" class="dashAnchor"></a>
  <a href="#t:secret_key_base/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">secret_key_base()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L159" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>secret_key_base() :: binary | nil</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:segments/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/segments" class="dashAnchor"></a>
  <a href="#t:segments/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">segments()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L160" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>segments() :: [binary]</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:state/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/state" class="dashAnchor"></a>
  <a href="#t:state/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">state()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L161" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre><a href="#t:state/0">state</a> ::
  :unset |
  :set |
  :set_chunked |
  :set_file |
  :file |
  :chunked |
  :sent</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:status/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/status" class="dashAnchor"></a>
  <a href="#t:status/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">status()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L162" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>status() :: atom | <a href="#t:int_status/0">int_status</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>
<div class="detail" id="t:t/0">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Type/t" class="dashAnchor"></a>
  <a href="#t:t/0" class="detail-link"
 title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <span class="signature">t()</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L164" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>t() :: %Plug.Conn{adapter: <a href="#t:adapter/0">adapter</a>, assigns: <a href="#t:assigns/0">assigns</a>, before_send: <a href="#t:before_send/0">before_send</a>, body_params: <a href="#t:params/0">params</a> | <a href="Plug.Conn.Unfetched.html#t:t/0">Plug.Conn.Unfetched.t</a>, cookies: <a href="#t:cookies/0">cookies</a> | <a href="Plug.Conn.Unfetched.html#t:t/0">Plug.Conn.Unfetched.t</a>, halted: term, host: <a href="#t:host/0">host</a>, method: <a href="#t:method/0">method</a>, owner: <a href="#t:owner/0">owner</a>, params: <a href="#t:params/0">params</a> | <a href="Plug.Conn.Unfetched.html#t:t/0">Plug.Conn.Unfetched.t</a>, path_info: <a href="#t:segments/0">segments</a>, path_params: <a href="#t:params/0">params</a>, peer: <a href="#t:peer/0">peer</a>, port: :inet.port_number, private: <a href="#t:assigns/0">assigns</a>, query_params: <a href="#t:params/0">params</a> | <a href="Plug.Conn.Unfetched.html#t:t/0">Plug.Conn.Unfetched.t</a>, query_string: <a href="#t:query_string/0">query_string</a>, remote_ip: :inet.ip_address, req_cookies: <a href="#t:cookies/0">cookies</a> | <a href="Plug.Conn.Unfetched.html#t:t/0">Plug.Conn.Unfetched.t</a>, req_headers: <a href="#t:headers/0">headers</a>, request_path: binary, resp_body: <a href="#t:body/0">body</a> | nil, resp_cookies: <a href="#t:resp_cookies/0">resp_cookies</a>, resp_headers: <a href="#t:headers/0">headers</a>, scheme: <a href="#t:scheme/0">scheme</a>, script_name: <a href="#t:segments/0">segments</a>, secret_key_base: <a href="#t:secret_key_base/0">secret_key_base</a>, state: <a href="#t:state/0">state</a>, status: <a href="#t:int_status/0">int_status</a>}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    
  </section>
</div>

          </div>
        </section>
      

      
        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Functions
          </h1>
          <div class="detail" id="assign/3">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/assign%2F3" class="dashAnchor"></a>
  <a href="#assign/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">assign(conn, key, value)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L287" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>assign(<a href="#t:t/0">t</a>, atom, term) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Assigns a value to a key in the connection</p>
<h2 id="assign/3-examples" class="section-heading">
  <a href="#assign/3-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>

<pre><code class="iex elixir">iex&gt; conn.assigns[:hello]
nil
iex&gt; conn = assign(conn, :hello, :world)
iex&gt; conn.assigns[:hello]
:world</code></pre>

  </section>
</div>
<div class="detail" id="async_assign/3">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/async_assign%2F3" class="dashAnchor"></a>
  <a href="#async_assign/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">async_assign(conn, key, fun)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L309" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>async_assign(<a href="#t:t/0">t</a>, atom, (() -> term)) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Starts a task to assign a value to a key in the connection.</p>
<p><a href="#await_assign/2"><code class="inline">await_assign/2</code></a> can be used to wait for the async task to complete and
retrieve the resulting value.</p>
<p>Behind the scenes, it uses <a href="https://hexdocs.pm/elixir/Task.html#async/1"><code class="inline">Task.async/1</code></a>.</p>
<h2 id="async_assign/3-examples" class="section-heading">
  <a href="#async_assign/3-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>

<pre><code class="iex elixir">iex&gt; conn.assigns[:hello]
nil
iex&gt; conn = async_assign(conn, :hello, fn -&gt; :world end)
iex&gt; conn.assigns[:hello]
%Task{...}</code></pre>

  </section>
</div>
<div class="detail" id="await_assign/3">
  
  
    <span id="await_assign/2"></span>
  
  <div class="detail-header">
      <a name="//apple_ref/Function/await_assign%2F3" class="dashAnchor"></a>
  <a href="#await_assign/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">await_assign(conn, key, timeout \\ 5000)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L332" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>await_assign(<a href="#t:t/0">t</a>, atom, timeout) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Awaits the completion of an async assign.</p>
<p>Returns a connection with the value resulting from the async assignment placed
under <code class="inline">key</code> in the <code class="inline">:assigns</code> field.</p>
<p>Behind the scenes, it uses <a href="https://hexdocs.pm/elixir/Task.html#await/2"><code class="inline">Task.await/2</code></a>.</p>
<h2 id="await_assign/3-examples" class="section-heading">
  <a href="#await_assign/3-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>

<pre><code class="iex elixir">iex&gt; conn.assigns[:hello]
nil
iex&gt; conn = async_assign(conn, :hello, fn -&gt; :world end)
iex&gt; conn = await_assign(conn, :hello) # blocks until `conn.assigns[:hello]` is available
iex&gt; conn.assigns[:hello]
:world</code></pre>

  </section>
</div>
<div class="detail" id="chunk/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/chunk%2F2" class="dashAnchor"></a>
  <a href="#chunk/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">chunk(conn, chunk)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L478" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>chunk(<a href="#t:t/0">t</a>, <a href="#t:body/0">body</a>) :: {:ok, <a href="#t:t/0">t</a>} | {:error, term} | no_return</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Sends a chunk as part of a chunked response.</p>
<p>It expects a connection with state <code class="inline">:chunked</code> as set by
<a href="#send_chunked/2"><code class="inline">send_chunked/2</code></a>. It returns <code class="inline">{:ok, conn}</code> in case of success,
otherwise <code class="inline">{:error, reason}</code>.</p>

  </section>
</div>
<div class="detail" id="clear_session/1">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/clear_session%2F1" class="dashAnchor"></a>
  <a href="#clear_session/1" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">clear_session(conn)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L1080" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>clear_session(<a href="#t:t/0">t</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Clears the entire session.</p>
<p>This function removes every key from the session, clearing the session.</p>
<p>Note that, even if <a href="#clear_session/1"><code class="inline">clear_session/1</code></a> is used, the session is still sent to the
client. If the session should be effectively <em>dropped</em>, <a href="#configure_session/2"><code class="inline">configure_session/2</code></a>
should be used with the <code class="inline">:drop</code> option set to <code class="inline">true</code>.</p>

  </section>
</div>
<div class="detail" id="configure_session/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/configure_session%2F2" class="dashAnchor"></a>
  <a href="#configure_session/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">configure_session(conn, opts)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L1098" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>configure_session(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Configures the session.</p>
<h2 id="configure_session/2-options" class="section-heading">
  <a href="#configure_session/2-options" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Options
</h2>

<ul>
<li><code class="inline">:renew</code> - generates a new session id for the cookie
</li>
<li><code class="inline">:drop</code> - drops the session, a session cookie will not be included in the
response
</li>
<li><code class="inline">:ignore</code> - ignores all changes made to the session in this request cycle
</li>
</ul>

  </section>
</div>
<div class="detail" id="delete_req_header/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/delete_req_header%2F2" class="dashAnchor"></a>
  <a href="#delete_req_header/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">delete_req_header(conn, key)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L566" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>delete_req_header(<a href="#t:t/0">t</a>, binary) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Deletes a request header if present.</p>
<p>Raises a <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a> if the connection has already been
<code class="inline">:sent</code> or <code class="inline">:chunked</code>.</p>

  </section>
</div>
<div class="detail" id="delete_resp_cookie/3">
  
  
    <span id="delete_resp_cookie/2"></span>
  
  <div class="detail-header">
      <a name="//apple_ref/Function/delete_resp_cookie%2F3" class="dashAnchor"></a>
  <a href="#delete_resp_cookie/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">delete_resp_cookie(conn, key, opts \\ [])</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L1010" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>delete_resp_cookie(<a href="#t:t/0">t</a>, binary, <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Deletes a response cookie.</p>
<p>Deleting a cookie requires the same options as to when the cookie was put.
Check <a href="#put_resp_cookie/4"><code class="inline">put_resp_cookie/4</code></a> for more information.</p>

  </section>
</div>
<div class="detail" id="delete_resp_header/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/delete_resp_header%2F2" class="dashAnchor"></a>
  <a href="#delete_resp_header/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">delete_resp_header(conn, key)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L686" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>delete_resp_header(<a href="#t:t/0">t</a>, binary) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Deletes a response header if present.</p>
<p>Raises a <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a> if the connection has already been
<code class="inline">:sent</code> or <code class="inline">:chunked</code>.</p>

  </section>
</div>
<div class="detail" id="delete_session/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/delete_session%2F2" class="dashAnchor"></a>
  <a href="#delete_session/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">delete_session(conn, key)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L1066" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>delete_session(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a> | atom) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Deletes the session for the given <code class="inline">key</code>.</p>
<p>The key can be a string or an atom, where atoms are
automatically converted to strings.</p>

  </section>
</div>
<div class="detail" id="fetch_cookies/2">
  
  
    <span id="fetch_cookies/1"></span>
  
  <div class="detail-header">
      <a name="//apple_ref/Function/fetch_cookies%2F2" class="dashAnchor"></a>
  <a href="#fetch_cookies/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">fetch_cookies(conn, opts \\ [])</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L963" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>fetch_cookies(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Fetches cookies from the request headers.</p>

  </section>
</div>
<div class="detail" id="fetch_query_params/2">
  
  
    <span id="fetch_query_params/1"></span>
  
  <div class="detail-header">
      <a name="//apple_ref/Function/fetch_query_params%2F2" class="dashAnchor"></a>
  <a href="#fetch_query_params/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">fetch_query_params(conn, opts \\ [])</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L751" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>fetch_query_params(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Fetches query parameters from the query string.</p>
<p>This function does not fetch parameters from the body. To fetch
parameters from the body, use the <a href="Plug.Parsers.html"><code class="inline">Plug.Parsers</code></a> plug.</p>

  </section>
</div>
<div class="detail" id="fetch_session/2">
  
  
    <span id="fetch_session/1"></span>
  
  <div class="detail-header">
      <a name="//apple_ref/Function/fetch_session%2F2" class="dashAnchor"></a>
  <a href="#fetch_session/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">fetch_session(conn, opts \\ [])</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L1023" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>fetch_session(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Fetches the session from the session store. Will also fetch cookies.</p>

  </section>
</div>
<div class="detail" id="get_req_header/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/get_req_header%2F2" class="dashAnchor"></a>
  <a href="#get_req_header/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">get_req_header(conn, key)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L524" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>get_req_header(<a href="#t:t/0">t</a>, binary) :: [binary]</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Returns the values of the request header specified by <code class="inline">key</code>.</p>

  </section>
</div>
<div class="detail" id="get_resp_header/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/get_resp_header%2F2" class="dashAnchor"></a>
  <a href="#get_resp_header/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">get_resp_header(conn, key)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L606" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>get_resp_header(<a href="#t:t/0">t</a>, binary) :: [binary]</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Returns the values of the response header specified by <code class="inline">key</code>.</p>
<h2 id="get_resp_header/2-examples" class="section-heading">
  <a href="#get_resp_header/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>

<pre><code class="iex elixir">iex&gt; conn = %{conn | resp_headers: [{&quot;content-type&quot;, &quot;text/plain&quot;}]}
iex&gt; get_resp_header(conn, &quot;content-type&quot;)
[&quot;text/plain&quot;]</code></pre>

  </section>
</div>
<div class="detail" id="get_session/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/get_session%2F2" class="dashAnchor"></a>
  <a href="#get_session/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">get_session(conn, key)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L1053" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>get_session(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a> | atom) :: any</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Returns session value for the given <code class="inline">key</code>. If <code class="inline">key</code>
is not set, <code class="inline">nil</code> is returned.</p>
<p>The key can be a string or an atom, where atoms are
automatically converted to strings.</p>

  </section>
</div>
<div class="detail" id="halt/1">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/halt%2F1" class="dashAnchor"></a>
  <a href="#halt/1" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">halt(conn)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L1133" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>halt(<a href="#t:t/0">t</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Halts the Plug pipeline by preventing further plugs downstream from being
invoked. See the docs for <a href="Plug.Builder.html"><code class="inline">Plug.Builder</code></a> for more information on halting a
plug pipeline.</p>

  </section>
</div>
<div class="detail" id="merge_resp_headers/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/merge_resp_headers%2F2" class="dashAnchor"></a>
  <a href="#merge_resp_headers/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">merge_resp_headers(conn, headers)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L661" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>merge_resp_headers(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/Enum.html#t:t/0">Enum.t</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Merges a series of response headers into the connection.</p>
<h2 id="merge_resp_headers/2-example" class="section-heading">
  <a href="#merge_resp_headers/2-example" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Example
</h2>

<pre><code class="iex elixir">iex&gt; conn = merge_resp_headers(conn, [{&quot;content-type&quot;, &quot;text/plain&quot;}, {&quot;X-1337&quot;, &quot;5P34K&quot;}])</code></pre>

  </section>
</div>
<div class="detail" id="put_private/3">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/put_private%2F3" class="dashAnchor"></a>
  <a href="#put_private/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">put_private(conn, key, value)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L355" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>put_private(<a href="#t:t/0">t</a>, atom, term) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Assigns a new <strong>private</strong> key and value in the connection.</p>
<p>This storage is meant to be used by libraries and frameworks to avoid writing
to the user storage (the <code class="inline">:assigns</code> field). It is recommended for
libraries/frameworks to prefix the keys with the library name.</p>
<p>For example, if some plug needs to store a <code class="inline">:hello</code> key, it
should do so as <code class="inline">:plug_hello</code>:</p>
<pre><code class="iex elixir">iex&gt; conn.private[:plug_hello]
nil
iex&gt; conn = put_private(conn, :plug_hello, :world)
iex&gt; conn.private[:plug_hello]
:world</code></pre>

  </section>
</div>
<div class="detail" id="put_req_header/3">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/put_req_header%2F3" class="dashAnchor"></a>
  <a href="#put_req_header/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">put_req_header(conn, key, value)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L545" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>put_req_header(<a href="#t:t/0">t</a>, binary, binary) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Adds a new request header (<code class="inline">key</code>) if not present, otherwise replaces the
previous value of that header with <code class="inline">value</code>.</p>
<p>It is recommended for header keys to be in lower-case, to avoid sending
duplicate keys in a request. As a convenience, this is validated during
testing which raises a <a href="Plug.Conn.InvalidHeaderError.html"><code class="inline">Plug.Conn.InvalidHeaderError</code></a> if the header key
is not lowercase.</p>
<p>Raises a <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a> if the connection has already been
<code class="inline">:sent</code> or <code class="inline">:chunked</code>.</p>

  </section>
</div>
<div class="detail" id="put_resp_content_type/3">
  
  
    <span id="put_resp_content_type/2"></span>
  
  <div class="detail-header">
      <a name="//apple_ref/Function/put_resp_content_type%2F3" class="dashAnchor"></a>
  <a href="#put_resp_content_type/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">put_resp_content_type(conn, content_type, charset \\ &quot;utf-8&quot;)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L726" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>put_resp_content_type(<a href="#t:t/0">t</a>, binary, binary | nil) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Sets the value of the <code class="inline">&quot;content-type&quot;</code> response header taking into account the
<code class="inline">charset</code>.</p>

  </section>
</div>
<div class="detail" id="put_resp_cookie/4">
  
  
    <span id="put_resp_cookie/3"></span>
  
  <div class="detail-header">
      <a name="//apple_ref/Function/put_resp_cookie%2F4" class="dashAnchor"></a>
  <a href="#put_resp_cookie/4" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">put_resp_cookie(conn, key, value, opts \\ [])</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L991" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>put_resp_cookie(<a href="#t:t/0">t</a>, binary, binary, <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Puts a response cookie.</p>
<p>The cookie value is not automatically escaped. Therefore, if you
want to store values with comma, quotes, etc, you need to explicitly
escape them or use a function such as <code class="inline">Base.encode64(value, padding: false)</code>
when writing and <code class="inline">Base.decode64(encoded, padding: false)</code> when reading
the cookie. Padding needs to be disabled since <code class="inline">=</code> is not a valid character
in cookie values.</p>
<h2 id="put_resp_cookie/4-options" class="section-heading">
  <a href="#put_resp_cookie/4-options" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Options
</h2>

<ul>
<li><code class="inline">:domain</code> - the domain the cookie applies to
</li>
<li><code class="inline">:max_age</code> - the cookie max-age, in seconds. Providing a value for this
option will set both the <em>max-age</em> and <em>expires</em> cookie attributes
</li>
<li><code class="inline">:path</code> - the path the cookie applies to
</li>
<li><code class="inline">:http_only</code> - when false, the cookie is accessible beyond http
</li>
<li><code class="inline">:secure</code> - if the cookie must be sent only over https. Defaults
to true when the connection is https
</li>
<li><code class="inline">:extra</code> - string to append to cookie. Use this to take advantage of
non-standard cookie attributes.
</li>
</ul>

  </section>
</div>
<div class="detail" id="put_resp_header/3">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/put_resp_header%2F3" class="dashAnchor"></a>
  <a href="#put_resp_header/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">put_resp_header(conn, key, value)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L634" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>put_resp_header(<a href="#t:t/0">t</a>, binary, binary) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Adds a new response header (<code class="inline">key</code>) if not present, otherwise replaces the
previous value of that header with <code class="inline">value</code>.</p>
<p>It is recommended for header keys to be in lower-case, to avoid sending
duplicate keys in a request. As a convenience, this is validated during
testing which raises a <a href="Plug.Conn.InvalidHeaderError.html"><code class="inline">Plug.Conn.InvalidHeaderError</code></a> if the header key
is not lowercase.</p>
<p>Raises a <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a> if the connection has already been
<code class="inline">:sent</code> or <code class="inline">:chunked</code>.</p>
<p>Raises a <a href="Plug.Conn.InvalidHeaderError.html"><code class="inline">Plug.Conn.InvalidHeaderError</code></a> if the header value contains control
feed (\r) or newline (\n) characters.</p>

  </section>
</div>
<div class="detail" id="put_session/3">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/put_session%2F3" class="dashAnchor"></a>
  <a href="#put_session/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">put_session(conn, key, value)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L1041" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>put_session(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a> | atom, any) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Puts the specified <code class="inline">value</code> in the session for the given <code class="inline">key</code>.</p>
<p>The key can be a string or an atom, where atoms are
automatically converted to strings. Can only be invoked
on unsent <code class="inline">conn</code>s. Will raise otherwise.</p>

  </section>
</div>
<div class="detail" id="put_status/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/put_status%2F2" class="dashAnchor"></a>
  <a href="#put_status/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">put_status(conn, status)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L373" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>put_status(<a href="#t:t/0">t</a>, <a href="#t:status/0">status</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Stores the given status code in the connection.</p>
<p>The status code can be <code class="inline">nil</code>, an integer or an atom. The list of allowed
atoms is available in <a href="Plug.Conn.Status.html"><code class="inline">Plug.Conn.Status</code></a>.</p>
<p>Raises a <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a> if the connection has already been
<code class="inline">:sent</code> or <code class="inline">:chunked</code>.</p>

  </section>
</div>
<div class="detail" id="read_body/2">
  
  
    <span id="read_body/1"></span>
  
  <div class="detail-header">
      <a name="//apple_ref/Function/read_body%2F2" class="dashAnchor"></a>
  <a href="#read_body/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">read_body(conn, opts \\ [])</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L797" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>read_body(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>) ::
  {:ok, binary, <a href="#t:t/0">t</a>} |
  {:more, binary, <a href="#t:t/0">t</a>} |
  {:error, term}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Reads the request body.</p>
<p>This function reads a chunk of the request body up to a given <code class="inline">:length</code>. If
there is more data to be read, then <code class="inline">{:more, partial_body, conn}</code> is
returned. Otherwise <code class="inline">{:ok, body, conn}</code> is returned. In case of an error
reading the socket, <code class="inline">{:error, reason}</code> is returned as per <a href="http://www.erlang.org/doc/man/gen_tcp.html#recv-2"><code class="inline">:gen_tcp.recv/2</code></a>.</p>
<p>In order to, for instance, support slower clients you can tune the
<code class="inline">:read_length</code> and <code class="inline">:read_timeout</code> options. These specify how much time should
be allowed to pass for each read from the underlying socket.</p>
<p>Because the request body can be of any size, reading the body will only
work once, as Plug will not cache the result of these operations. If you
need to access the body multiple times, it is your responsibility to store
it. Finally keep in mind some plugs like <a href="Plug.Parsers.html"><code class="inline">Plug.Parsers</code></a> may read the body,
so the body may be unavailable after being accessed by such plugs.</p>
<p>This function is able to handle both chunked and identity transfer-encoding
by default.</p>
<h2 id="read_body/2-options" class="section-heading">
  <a href="#read_body/2-options" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Options
</h2>

<ul>
<li><code class="inline">:length</code> - sets the maximum number of bytes to read from the body on
every call, defaults to 8_000_000 bytes
</li>
<li><code class="inline">:read_length</code> - sets the amount of bytes to read at one time from the
underlying socket to fill the chunk, defaults to 1_000_000 bytes
</li>
<li><code class="inline">:read_timeout</code> - sets the timeout for each socket read, defaults to
15_000ms
</li>
</ul>
<p>The values above are not meant to be exact. For example, setting the
length to 8_000_000 may end up reading some hundred bytes more from
the socket until we halt.</p>
<h2 id="read_body/2-examples" class="section-heading">
  <a href="#read_body/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>

<pre><code class="elixir">{:ok, body, conn} = Plug.Conn.read_body(conn, length: 1_000_000)</code></pre>

  </section>
</div>
<div class="detail" id="read_part_body/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/read_part_body%2F2" class="dashAnchor"></a>
  <a href="#read_part_body/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">read_part_body(conn, opts)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L866" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>read_part_body(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>) ::
  {:ok, binary, <a href="#t:t/0">t</a>} |
  {:more, binary, <a href="#t:t/0">t</a>} |
  {:done, <a href="#t:t/0">t</a>}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Reads the body of a multipart request.</p>
<p>Returns <code class="inline">{:ok, body, conn}</code> if all body has been read,
<code class="inline">{:more, binary, conn}</code> otherwise, and <code class="inline">{:done, conn}</code>
if there is no more body.</p>
<p>It accepts the same options as <a href="#read_body/2"><code class="inline">read_body/2</code></a>.</p>

  </section>
</div>
<div class="detail" id="read_part_headers/2">
  
  
    <span id="read_part_headers/1"></span>
  
  <div class="detail-header">
      <a name="//apple_ref/Function/read_part_headers%2F2" class="dashAnchor"></a>
  <a href="#read_part_headers/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">read_part_headers(conn, opts \\ [])</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L830" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>read_part_headers(<a href="#t:t/0">t</a>, <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>) ::
  {:ok, <a href="#t:headers/0">headers</a>, <a href="#t:t/0">t</a>} |
  {:done, <a href="#t:t/0">t</a>}</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Reads the headers of a multipart request.</p>
<p>It returns <code class="inline">{:ok, headers, conn}</code> with the headers or
<code class="inline">{:done, conn}</code> if there are no more parts.</p>
<p>Once <a href="#read_part_headers/2"><code class="inline">read_part_headers/2</code></a> is invoked, a developer may call
<a href="#read_part_body/2"><code class="inline">read_part_body/2</code></a> to read the body associated to the headers.
If <a href="#read_part_headers/2"><code class="inline">read_part_headers/2</code></a> is called instead, the body is automatically
skipped until the next part headers.</p>
<h2 id="read_part_headers/2-options" class="section-heading">
  <a href="#read_part_headers/2-options" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Options
</h2>

<ul>
<li><code class="inline">:length</code> - sets the maximum number of bytes to read from the body for
each chunk, defaults to 64_000 bytes
</li>
<li><code class="inline">:read_length</code> - sets the amount of bytes to read at one time from the
underlying socket to fill the chunk, defaults to 64_000 bytes
</li>
<li><code class="inline">:read_timeout</code> - sets the timeout for each socket read, defaults to
5_000ms
</li>
</ul>

  </section>
</div>
<div class="detail" id="register_before_send/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/register_before_send%2F2" class="dashAnchor"></a>
  <a href="#register_before_send/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">register_before_send(conn, callback)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L1122" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>register_before_send(<a href="#t:t/0">t</a>, (<a href="#t:t/0">t</a> -> <a href="#t:t/0">t</a>)) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Registers a callback to be invoked before the response is sent.</p>
<p>Callbacks are invoked in the reverse order they are defined (callbacks
defined first are invoked last).</p>

  </section>
</div>
<div class="detail" id="request_url/1">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/request_url%2F1" class="dashAnchor"></a>
  <a href="#request_url/1" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">request_url(conn)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L1140" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Returns the full request URL.</p>

  </section>
</div>
<div class="detail" id="resp/3">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/resp%2F3" class="dashAnchor"></a>
  <a href="#resp/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">resp(conn, status, body)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L515" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>resp(<a href="#t:t/0">t</a>, <a href="#t:status/0">status</a>, <a href="#t:body/0">body</a>) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Sets the response to the given <code class="inline">status</code> and <code class="inline">body</code>.</p>
<p>It sets the connection state to <code class="inline">:set</code> (if not already <code class="inline">:set</code>)
and raises <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a> if it was already <code class="inline">:sent</code>.</p>

  </section>
</div>
<div class="detail" id="send_chunked/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/send_chunked%2F2" class="dashAnchor"></a>
  <a href="#send_chunked/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">send_chunked(conn, status)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L451" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>send_chunked(<a href="#t:t/0">t</a>, <a href="#t:status/0">status</a>) :: <a href="#t:t/0">t</a> | no_return</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Sends the response headers as a chunked response.</p>
<p>It expects a connection that has not been <code class="inline">:sent</code> yet and sets its
state to <code class="inline">:chunked</code> afterwards. Otherwise raises <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a>.</p>

  </section>
</div>
<div class="detail" id="send_file/5">
  
  
    <span id="send_file/3"></span>
  
    <span id="send_file/4"></span>
  
  <div class="detail-header">
      <a name="//apple_ref/Function/send_file%2F5" class="dashAnchor"></a>
  <a href="#send_file/5" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">send_file(conn, status, file, offset \\ 0, length \\ :all)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L427" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>send_file(<a href="#t:t/0">t</a>, <a href="#t:status/0">status</a>, filename :: binary, offset :: integer, length :: integer | :all) ::
  <a href="#t:t/0">t</a> |
  no_return</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Sends a file as the response body with the given <code class="inline">status</code>
and optionally starting at the given offset until the given length.</p>
<p>If available, the file is sent directly over the socket using
the operating system <code class="inline">sendfile</code> operation.</p>
<p>It expects a connection that has not been <code class="inline">:sent</code> yet and sets its
state to <code class="inline">:file</code> afterwards. Otherwise raises <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a>.</p>
<h2 id="send_file/5-examples" class="section-heading">
  <a href="#send_file/5-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>

<pre><code class="elixir">Plug.Conn.send_file(conn, 200, &quot;README.md&quot;)</code></pre>

  </section>
</div>
<div class="detail" id="send_resp/1">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/send_resp%2F1" class="dashAnchor"></a>
  <a href="#send_resp/1" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">send_resp(conn)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L399" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>send_resp(<a href="#t:t/0">t</a>) :: <a href="#t:t/0">t</a> | no_return</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Sends a response to the client.</p>
<p>It expects the connection state to be <code class="inline">:set</code>, otherwise raises an
<a href="https://hexdocs.pm/elixir/ArgumentError.html"><code class="inline">ArgumentError</code></a> for <code class="inline">:unset</code> connections or a <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a> for
already <code class="inline">:sent</code> connections.</p>
<p>At the end sets the connection state to <code class="inline">:sent</code>.</p>

  </section>
</div>
<div class="detail" id="send_resp/3">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/send_resp%2F3" class="dashAnchor"></a>
  <a href="#send_resp/3" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">send_resp(conn, status, body)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L494" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>send_resp(<a href="#t:t/0">t</a>, <a href="#t:status/0">status</a>, <a href="#t:body/0">body</a>) :: <a href="#t:t/0">t</a> | no_return</pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Sends a response with the given status and body.</p>
<p>See <a href="#send_resp/1"><code class="inline">send_resp/1</code></a> for more information.</p>

  </section>
</div>
<div class="detail" id="update_req_header/4">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/update_req_header%2F4" class="dashAnchor"></a>
  <a href="#update_req_header/4" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">update_req_header(conn, key, initial, fun)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L587" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>update_req_header(<a href="#t:t/0">t</a>, binary, binary, (binary -> binary)) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Updates a request header if present, otherwise it sets it to an initial
value.</p>
<p>Raises a <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a> if the connection has already been
<code class="inline">:sent</code> or <code class="inline">:chunked</code>.</p>

  </section>
</div>
<div class="detail" id="update_resp_header/4">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/update_resp_header%2F4" class="dashAnchor"></a>
  <a href="#update_resp_header/4" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">update_resp_header(conn, key, initial, fun)</span>
    
      <a href="https://github.com/elixir-plug/plug/blob/v1.4.3/lib/plug/conn.ex#L707" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
      <div class="specs">
        
          <pre>update_resp_header(<a href="#t:t/0">t</a>, binary, binary, (binary -> binary)) :: <a href="#t:t/0">t</a></pre>
        
      </div>
    
  </div>
  <section class="docstring">
    <p>Updates a response header if present, otherwise it sets it to an initial
value.</p>
<p>Raises a <a href="Plug.Conn.AlreadySentError.html"><code class="inline">Plug.Conn.AlreadySentError</code></a> if the connection has already been
<code class="inline">:sent</code> or <code class="inline">:chunked</code>.</p>

  </section>
</div>

        </section>
      

      
          <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.17.1),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
            </span>
        </p>
        <button class="night-mode-toggle"><span class="sr-only">Switch theme</span></button>
      </footer>
    </div>
  </div>
</section>
</div>
  <script src="dist/app-4cfb39be16.js"></script>
  
  </body>
</html>

