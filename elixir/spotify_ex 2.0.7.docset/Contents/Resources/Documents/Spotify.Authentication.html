    <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.18.1">
    <title>Spotify.Authentication – spotify_ex v2.0.7</title>
    <link rel="stylesheet" href="dist/app-c922dbe7ef.css" />
    
    <script src="dist/sidebar_items-64606230a5.js"></script>
    
    
    
    
  </head>
  <body data-type="modules">
    <script>try { if(localStorage.getItem('night-mode')) document.body.className += ' night-mode'; } catch (e) { }</script>

    <div class="main">
<button class="sidebar-toggle" style="visibility: hidden">
  <span class="icon-menu" aria-hidden="true"></span>
  <span class="sr-only">Toggle Sidebar</span>
</button>
<section class="sidebar" style="visibility: hidden">

  
  <a href="https://github.com/jsncmgs1/spotify_ex" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        spotify_ex
      </h1>
      <h2 class="sidebar-projectVersion">
        v2.0.7
      </h2>
    </div>
    
  </a>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button">
      <span class="icon-search" aria-hidden="true"></span>
    </button>
    <input name="q" type="text" id="search-list" class="search-input" placeholder="search" aria-label="Search" autocomplete="off" />
  </form>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    
      <li><a id="exceptions-list" href="#full-list">Exceptions</a></li>
    

    
  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content" style="padding-left: 0;">
  <div class="content-outer">
    <div id="content" class="content-inner" style="margin: 0; margin-top: -28px; padding: 0px 14px;">


      <h1>
        <small class="visible-xs">spotify_ex v2.0.7</small>
        Spotify.Authentication
        
          <a href="https://github.com/jsncmgs1/spotify_ex/blob/master/lib/spotify/authentication.ex#L9" title="View Source" class="view-source" rel="help">
            <span class="icon-code" aria-hidden="true"></span>
            <span class="sr-only">View Source</span>
          </a>
        
      </h1>

      
        <section id="moduledoc">
          <p>Authenticates the Spotify user.</p>
<p>After your app is authorized, the user must be authenticated.  A redirect
URL is specified in the config folder.  This is the URL that Spotify
redirects to after authorization, and should ultimately end up hitting
this module’s <code class="inline">authenticate</code> function. If the authorization is successful,
the param <code class="inline">code</code> will be present.</p>
<p>If a refresh token still exists, the client will refresh the access token.</p>
<p>You have the option to pass either a Plug.Conn or a Spotify.Credentials struct into
these functions. If you pass Conn, the auth tokens will be saved in cookies.
If you pass Credentials, you will be responsible for persisting the auth tokens
between requests.</p>

        </section>
      

      
        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>
          

          
  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#authenticate/2">authenticate(conn_or_auth, map)</a>
  </div>
  
    <div class="summary-synopsis"><p>Authenticates the user</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#refresh/1">refresh(conn_or_auth)</a>
  </div>
  
    <div class="summary-synopsis"><p>Attempts to refresh your access token if the refresh token exists. Returns
<code class="inline">:unauthorized</code> if there is no refresh token</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tokens_present?/1">tokens_present?(conn_or_auth)</a>
  </div>
  
    <div class="summary-synopsis"><p>Checks for refresh and access tokens</p>
</div>
  
</div>

  </div>


          

        </section>
      

      

      
        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Functions
          </h1>
          <div class="detail" id="authenticate/2">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/authenticate%2F2" class="dashAnchor"></a>
  <a href="#authenticate/2" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">authenticate(conn_or_auth, map)</span>
    
      <a href="https://github.com/jsncmgs1/spotify_ex/blob/master/lib/spotify/authentication.ex#L56" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Authenticates the user</p>
<p>The authorization code must be present from spotify or an exception
will be raised.  The token will be refreshed if possible, otherwise
the app will request new access and request tokens.</p>
<h2 id="authenticate/2-example" class="section-heading">
  <a href="#authenticate/2-example" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Example:
</h2>

<pre><code class="elixir">Spotify.authenticate(conn, %{&quot;code&quot; =&gt; code})
# {:ok, conn}

Spotify.authenticate(conn, %{&quot;not_a_code&quot; =&gt; invalid})
# AuthenticationError, &quot;No code provided by Spotify. Authorize your app again&quot;

Spotify.authenticate(auth, params)
# {:ok, auth}</code></pre>

  </section>
</div>
<div class="detail" id="refresh/1">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/refresh%2F1" class="dashAnchor"></a>
  <a href="#refresh/1" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">refresh(conn_or_auth)</span>
    
      <a href="https://github.com/jsncmgs1/spotify_ex/blob/master/lib/spotify/authentication.ex#L72" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Attempts to refresh your access token if the refresh token exists. Returns
<code class="inline">:unauthorized</code> if there is no refresh token.</p>

  </section>
</div>
<div class="detail" id="tokens_present?/1">
  
  
  <div class="detail-header">
      <a name="//apple_ref/Function/tokens_present%3F%2F1" class="dashAnchor"></a>
  <a href="#tokens_present?/1" class="detail-link"
 title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <span class="signature">tokens_present?(conn_or_auth)</span>
    
      <a href="https://github.com/jsncmgs1/spotify_ex/blob/master/lib/spotify/authentication.ex#L93" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>
    
    
    
  </div>
  <section class="docstring">
    <p>Checks for refresh and access tokens</p>
<h2 id="tokens_present?/1-example" class="section-heading">
  <a href="#tokens_present?/1-example" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Example:
</h2>

<pre><code class="elixir">defmodule PlayListController do
  plug :check_tokens

  def check_tokens do
    unless Spotify.Authentication.tokens_present?(conn) do
      redirect conn, to: authorization_path(:authorize)
    end
  end
end</code></pre>

  </section>
</div>

        </section>
      

      
          <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.18.1),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
            </span>
        </p>
        <button class="night-mode-toggle"><span class="sr-only">Switch theme</span></button>
      </footer>
    </div>
  </div>
</section>
</div>
  <script src="dist/app-778c9ef903.js"></script>
  
  
  
  
  </body>
</html>

